<!-- This code is meant to be an example on how Mujoco XML works
	Created on 5th December 2019
	Version 3.4; Prototype_3
	Author: Joon You Tan, jtan0026@student.monash.edu, Jan 2020
	Property of Monash University, Department of Electrical and Computer Engineering 
	Violation of property will be prosecuted 										-->
	
<mujoco model = "Prototype_3">
	<option gravity="0 0 -9.81" timestep="0.01"/>
	<asset>
		<texture type="skybox" builtin="gradient" rgb1="1 1 1" rgb2=".6 .8 1" width="256" height="256"/>
		<material name="MatPlane" reflectance="0.5" shininess="1" specular="1" texrepeat="60 60"/>
	</asset>
	
	<!-- Parameters for compiling angles -->
	<compiler angle = "radian" coordinate = "local" inertiafromgeom="true"/>
	
	<!-- defaults and integrators here: -->
	<default>
		<default class = "LinkageAtMount">
		</default>
		<joint type="hinge" axis="0 1 0" frictionloss=".001"/>
	</default>
	
	<option integrator = "RK4" timestep = "0.01"/>
	
	<!-- Assets containing all STL files -->
	<asset>
		<mesh name = "LinkageCAM" file = "stl_prototype3/LinkageCAM.stl"/>
		<mesh name = "LinkageCAM_m" file = "stl_prototype3/LinkBoiCAM_m.stl"/> 
		<mesh name = "EndEffector" file = "stl_prototype3/EndLeg.stl"/>
		<mesh name = "MiddleLinkage" file = "stl_prototype3/MiddleLink.stl"/>
		<mesh name = "LinkageGuide" file = "stl_prototype3/NormalGuide.stl"/>
		<mesh name = "ServoLinkage" file = "stl_prototype3/ServoGuide.stl"/> 
		<mesh name = "ServoMount" file = "stl_prototype3/ServoMount.stl"/>
		<mesh name = "ChasisBase" file = "stl_prototype3/ChasisBase.stl"/>
	</asset>
	
	<!-- World building body structure starts from here: -->
	<worldbody>
		<light cutoff="100" diffuse="1 1 1" dir="-0 0 -1.3" directional="true" exponent="1" pos="0 0 1.3" specular=".1 .1 .1"/>
		
		<geom conaffinity="1" condim="3" material="MatPlane" name="floor" pos="0 0 0" rgba="0.8 0.9 0.8 1" size="1000 1000 1000" type="plane"/>
		
		<!-- Main Frame of the Body of the bot
			Note that measurements within simulation are subject to .7mm tolerance
			Joint Angles Initialised as:
				Servo_Guide: 		11 degrees from plane
				Normal_Guide: 		50 degrees from top plane of ServoMount
				LinkCAM:			No Change
				LinkCAM_m: 			40 degrees from top plane of ServoMount
				MiddleLink: 		38 degrees from plane
				EndEffector: 		107 degrees from top plane of Servo Mount 
			All units for this XML file are assumed to be SI. (Mujoco unspecified.)
			Distances: mm, mass: grams, rotational unit: radian						-->
		<body name = "Prototype_3_Chasis" pos = "0 0 100">
			<geom type = "mesh" mesh = "ChasisBase"/>
			<joint armature="0" damping="0" limited="false" margin="0.01" name="root" pos="0 0 0" type="free"/>
			<!-- @todo Add Intertial properties and mass -->
			<body name = "ServoMount_1" pos = "-30.2 70.625 -40.8" quat = "-0.7071068 0 0 0.7071068">
				<geom type = "mesh" mesh = "ServoMount"/>
				<body name = "Servo_Guide_1"  pos = "3 -17.25 21.5" quat = "0.7038514 -0.0677732 0.0677732 0.7038514">
					<geom type = "mesh" mesh = "ServoLinkage"/>
					<joint name = "SG_J_1" pos = "33 0 7.5"/> <!-- Joint for SG and Mount -->
					<body name = "MiddleLink_1" pos = "-45.5 -4 43" quat = "0.9366722 0 0.3502074 0">
						<geom name = "ML_1" type = "mesh" mesh = "MiddleLinkage"/>
						<joint name = "ML_Joint_1" pos = "62.4 2 7.5"/>
						<body name = "EndEffector_1" pos = "105.5 -5 -72.5" quat ="-0.4617486 0 0.8870108 0">
							<geom name = "EE_1" type = "mesh" mesh = "EndEffector"/>
							<joint name = "EE_Joint_1" pos = "121.25 2 33.5"/>
						</body>
					</body> 
				</body>
				<body name = "NormalGuide_1"  pos = "3 -22 31" quat = "0.6724985 0.218508 -0.218508 0.6724985">
					<geom  type = "mesh" mesh = "LinkageGuide"/>
					<joint name = "NG_Joint_1" pos = "53 2 7.5"/> <!-- Joint for NG and MD_L -->
				</body>
				<body name = "LinkCAM_1" pos = "13.5 -26 75.5" quat = "0 0.7071068 0.7071068 0">
					<geom type = "mesh" mesh = "LinkageCAM"/>
					<body name = "LinkCAM_m_1" pos = "-27 8 47" quat = "0 0.9396926 0 -0.3420201">
						<geom type = "mesh" mesh = "LinkageCAM_m"/>
					</body>
				</body>
			</body>
			<!-- Leg 2 -->
			<body name = "ServoMount_2" pos = "7.6 -15.4 -40.8" quat = "-0.9659258 0 0 0.258819">
				<geom type = "mesh" mesh = "ServoMount"/>
				<body name = "Servo_Guide_2"  pos = "3 -17.25 21.5" quat = "0.7038514 -0.0677732 0.0677732 0.7038514">
					<geom type = "mesh" mesh = "ServoLinkage"/>
					<joint name = "SG_J_2" pos = "33 0 7.5"/> <!-- Joint for SG and Mount -->
					<body name = "MiddleLink_2" pos = "-45.5 -4 43" quat = "0.9366722 0 0.3502074 0">
						<geom name = "ML_2" type = "mesh" mesh = "MiddleLinkage"/>
						<joint name = "ML_Joint_2" pos = "62.4 2 7.5"/>
						<body name = "EndEffector_2" pos = "105.5 -5 -72.5" quat ="-0.4617486 0 0.8870108 0">
							<geom name = "EE_2" type = "mesh" mesh = "EndEffector"/>
							<joint name = "EE_Joint_2" pos = "121.25 2 33.5"/>
						</body>
					</body> 
				</body>
				<body name = "NormalGuide_2"  pos = "3 -22 31" quat = "0.6724985 0.218508 -0.218508 0.6724985">
					<geom  type = "mesh" mesh = "LinkageGuide"/>
					<joint name = "NG_Joint_2" pos = "53 2 7.5"/> <!-- Joint for NG and MD_L -->
				</body>
				<body name = "LinkCAM_2" pos = "13.5 -26 75.5" quat = "0 0.7071068 0.7071068 0">
					<geom type = "mesh" mesh = "LinkageCAM"/>
					<body name = "LinkCAM_m_2" pos = "-27 8 47" quat = "0 0.9396926 0 -0.3420201">
						<geom type = "mesh" mesh = "LinkageCAM_m"/>
					</body>
				</body>
			</body>
			<!-- Leg 3 -->
			<body name = "ServoMount_3" pos = "101.1 -25.8 -40.8" axisangle = "0 0 1 0.523599">
				<geom type = "mesh" mesh = "ServoMount"/>
				<body name = "Servo_Guide_3"  pos = "3 -17.25 21.5" quat = "0.7038514 -0.0677732 0.0677732 0.7038514">
					<geom type = "mesh" mesh = "ServoLinkage"/>
					<joint name = "SG_J_3" pos = "33 0 7.5"/> <!-- Joint for SG and Mount -->
					<body name = "MiddleLink_3" pos = "-45.5 -4 43" quat = "0.9366722 0 0.3502074 0">
						<geom name = "ML_3" type = "mesh" mesh = "MiddleLinkage"/>
						<joint name = "ML_Joint_3" pos = "62.4 2 7.5"/>
						<body name = "EndEffector_3" pos = "105.5 -5 -72.5" quat ="-0.4617486 0 0.8870108 0">
							<geom name = "EE_3" type = "mesh" mesh = "EndEffector"/>
							<joint name = "EE_Joint_3" pos = "121.25 2 33.5"/>
						</body>
					</body> 
				</body>
				<body name = "NormalGuide_3"  pos = "3 -22 31" quat = "0.6724985 0.218508 -0.218508 0.6724985">
					<geom  type = "mesh" mesh = "LinkageGuide"/>
					<joint name = "NG_Joint_3" pos = "53 2 7.5"/> <!-- Joint for NG and MD_L -->
				</body>
				<body name = "LinkCAM_3" pos = "13.5 -26 75.5" quat = "0 0.7071068 0.7071068 0">
					<geom type = "mesh" mesh = "LinkageCAM"/>
					<body name = "LinkCAM_m_3" pos = "-27 8 47" quat = "0 0.9396926 0 -0.3420201">
						<geom type = "mesh" mesh = "LinkageCAM_m"/>
					</body>
				</body>
			</body>
			<!-- Leg 4 -->
			<body name = "ServoMount_4" pos = "156.7 50 -40.8" axisangle = "0 0 1 1.57">
				<geom type = "mesh" mesh = "ServoMount"/>
				<body name = "Servo_Guide_4"  pos = "3 -17.25 21.5" quat = "0.7038514 -0.0677732 0.0677732 0.7038514">
					<geom type = "mesh" mesh = "ServoLinkage"/>
					<joint name = "SG_J_4" pos = "33 0 7.5"/> <!-- Joint for SG and Mount -->
					<body name = "MiddleLink_4" pos = "-45.5 -4 43" quat = "0.9366722 0 0.3502074 0">
						<geom name = "ML_4" type = "mesh" mesh = "MiddleLinkage"/>
						<joint name = "ML_Joint_4" pos = "62.4 2 7.5"/>
						<body name = "EndEffector_4" pos = "105.5 -5 -72.5" quat ="-0.4617486 0 0.8870108 0">
							<geom name = "EE_4" type = "mesh" mesh = "EndEffector"/>
							<joint name = "EE_Joint_4" pos = "121.25 2 33.5"/>
						</body>
					</body> 
				</body>
				<body name = "NormalGuide_4"  pos = "3 -22 31" quat = "0.6724985 0.218508 -0.218508 0.6724985">
					<geom  type = "mesh" mesh = "LinkageGuide"/>
					<joint name = "NG_Joint_4" pos = "53 2 7.5"/> <!-- Joint for NG and MD_L -->
				</body>
				<body name = "LinkCAM_4" pos = "13.5 -26 75.5" quat = "0 0.7071068 0.7071068 0">
					<geom type = "mesh" mesh = "LinkageCAM"/>
					<body name = "LinkCAM_m_4" pos = "-27 8 47" quat = "0 0.9396926 0 -0.3420201">
						<geom type = "mesh" mesh = "LinkageCAM_m"/>
					</body>
				</body>
			</body>
			<!-- Leg 5 -->
			<body name = "ServoMount_5" pos = "118.8 136 -40.8" axisangle = "0 0 1 2.61799">
				<geom type = "mesh" mesh = "ServoMount"/>
				<body name = "Servo_Guide_5"  pos = "3 -17.25 21.5" quat = "0.7038514 -0.0677732 0.0677732 0.7038514">
					<geom type = "mesh" mesh = "ServoLinkage"/>
					<joint name = "SG_J_5" pos = "33 0 7.5"/> <!-- Joint for SG and Mount -->
					<body name = "MiddleLink_5" pos = "-45.5 -4 43" quat = "0.9366722 0 0.3502074 0">
						<geom name = "ML_5" type = "mesh" mesh = "MiddleLinkage"/>
						<joint name = "ML_Joint_5" pos = "62.4 2 7.5"/>
						<body name = "EndEffector_5" pos = "105.5 -5 -72.5" quat ="-0.4617486 0 0.8870108 0">
							<geom name = "EE_5" type = "mesh" mesh = "EndEffector"/>
							<joint name = "EE_Joint_5" pos = "121.25 2 33.5"/>
						</body>
					</body> 
				</body>
				<body name = "NormalGuide_5"  pos = "3 -22 31" quat = "0.6724985 0.218508 -0.218508 0.6724985">
					<geom  type = "mesh" mesh = "LinkageGuide"/>
					<joint name = "NG_Joint_5" pos = "53 2 7.5"/> <!-- Joint for NG and MD_L -->
				</body>
				<body name = "LinkCAM_5" pos = "13.5 -26 75.5" quat = "0 0.7071068 0.7071068 0">
					<geom type = "mesh" mesh = "LinkageCAM"/>
					<body name = "LinkCAM_m_5" pos = "-27 8 47" quat = "0 0.9396926 0 -0.3420201">
						<geom type = "mesh" mesh = "LinkageCAM_m"/>
					</body>
				</body>
			</body>
			<!-- Leg 6 -->
			<body name = "ServoMount_6" pos = "25.5 146.5 -40.8" axisangle = "0 0 1 -2.61799">
				<geom type = "mesh" mesh = "ServoMount"/>
				<body name = "Servo_Guide_6"  pos = "3 -17.25 21.5" quat = "0.7038514 -0.0677732 0.0677732 0.7038514">
					<geom type = "mesh" mesh = "ServoLinkage"/>
					<joint name = "SG_J_6" pos = "33 0 7.5"/> <!-- Joint for SG and Mount -->
					<body name = "MiddleLink_6" pos = "-45.5 -4 43" quat = "0.9366722 0 0.3502074 0">
						<geom name = "ML_6" type = "mesh" mesh = "MiddleLinkage"/>
						<joint name = "ML_Joint_6" pos = "62.4 2 7.5"/>
						<body name = "EndEffector_6" pos = "105.5 -5 -72.5" quat ="-0.4617486 0 0.8870108 0">
							<geom name = "EE_6" type = "mesh" mesh = "EndEffector"/>
							<joint name = "EE_Joint_6" pos = "121.25 2 33.5"/>
						</body>
					</body> 
				</body>
				<body name = "NormalGuide_6"  pos = "3 -22 31" quat = "0.6724985 0.218508 -0.218508 0.6724985">
					<geom  type = "mesh" mesh = "LinkageGuide"/>
					<joint name = "NG_Joint_6" pos = "53 2 7.5"/> <!-- Joint for NG and MD_L -->
				</body>
				<body name = "LinkCAM_6" pos = "13.5 -26 75.5" quat = "0 0.7071068 0.7071068 0">
					<geom type = "mesh" mesh = "LinkageCAM"/>
					<body name = "LinkCAM_m_6" pos = "-27 8 47" quat = "0 0.9396926 0 -0.3420201">
						<geom type = "mesh" mesh = "LinkageCAM_m"/>
					</body>
				</body>
			</body>
		</body>
	</worldbody>
	<equality>
		<connect name = "NG_ML_C1_A" body1 = "NormalGuide_1" body2 = "MiddleLink_1" anchor = "7.7 2 7.5"/>
		<connect name = "NG_ML_C1_B" body1 = "NormalGuide_1" body2 = "MiddleLink_1" anchor = "7.7 -2 7.5"/>
		<connect name = "LCm_EE_C1_A" body1 = "LinkCAM_m_1" body2 = "EndEffector_1" anchor = "7.7 2 7.5"/>
		<connect name = "LCm_EE_C1_B" body1 = "LinkCAM_m_1" body2 = "EndEffector_1" anchor = "7.7 0 7.5"/>
		
		<connect name = "NG_ML_C2_A" body1 = "NormalGuide_2" body2 = "MiddleLink_2" anchor = "7.7 2 7.5"/>
		<connect name = "NG_ML_C2_B" body1 = "NormalGuide_2" body2 = "MiddleLink_2" anchor = "7.7 -2 7.5"/>
		<connect name = "LCm_EE_C2_A" body1 = "LinkCAM_m_2" body2 = "EndEffector_2" anchor = "7.7 2 7.5"/>
		<connect name = "LCm_EE_C2_B" body1 = "LinkCAM_m_2" body2 = "EndEffector_2" anchor = "7.7 0 7.5"/>
		
		<connect name = "NG_ML_C3_A" body1 = "NormalGuide_3" body2 = "MiddleLink_3" anchor = "7.7 2 7.5"/>
		<connect name = "NG_ML_C3_B" body1 = "NormalGuide_3" body2 = "MiddleLink_3" anchor = "7.7 -2 7.5"/>
		<connect name = "LCm_EE_C3_A" body1 = "LinkCAM_m_3" body2 = "EndEffector_3" anchor = "7.7 2 7.5"/>
		<connect name = "LCm_EE_C3_B" body1 = "LinkCAM_m_3" body2 = "EndEffector_3" anchor = "7.7 0 7.5"/>
		
		<connect name = "NG_ML_C4_A" body1 = "NormalGuide_4" body2 = "MiddleLink_4" anchor = "7.7 2 7.5"/>
		<connect name = "NG_ML_C4_B" body1 = "NormalGuide_4" body2 = "MiddleLink_4" anchor = "7.7 -2 7.5"/>
		<connect name = "LCm_EE_C4_A" body1 = "LinkCAM_m_4" body2 = "EndEffector_4" anchor = "7.7 2 7.5"/>
		<connect name = "LCm_EE_C4_B" body1 = "LinkCAM_m_4" body2 = "EndEffector_4" anchor = "7.7 0 7.5"/>
		
		<connect name = "NG_ML_C5_A" body1 = "NormalGuide_5" body2 = "MiddleLink_5" anchor = "7.7 2 7.5"/>
		<connect name = "NG_ML_C5_B" body1 = "NormalGuide_5" body2 = "MiddleLink_5" anchor = "7.7 -2 7.5"/>
		<connect name = "LCm_EE_C5_A" body1 = "LinkCAM_m_5" body2 = "EndEffector_5" anchor = "7.7 2 7.5"/>
		<connect name = "LCm_EE_C5_B" body1 = "LinkCAM_m_5" body2 = "EndEffector_5" anchor = "7.7 0 7.5"/>
		
		<connect name = "NG_ML_C6_A" body1 = "NormalGuide_6" body2 = "MiddleLink_6" anchor = "7.7 2 7.5"/>
		<connect name = "NG_ML_C6_B" body1 = "NormalGuide_6" body2 = "MiddleLink_6" anchor = "7.7 -2 7.5"/>
		<connect name = "LCm_EE_C6_A" body1 = "LinkCAM_m_6" body2 = "EndEffector_6" anchor = "7.7 2 7.5"/>
		<connect name = "LCm_EE_C6_B" body1 = "LinkCAM_m_6" body2 = "EndEffector_6" anchor = "7.7 0 7.5"/>
	</equality>
	<!-- Motor Specifitaion and definitions here: -->
	<actuator>
	    <motor ctrllimited="true" ctrlrange="-1.0 1.0" joint="SG_J_1" gear="150"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" joint="SG_J_2" gear="150"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" joint="SG_J_3" gear="150"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" joint="SG_J_4" gear="150"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" joint="SG_J_5" gear="150"/>
		<motor ctrllimited="true" ctrlrange="-1.0 1.0" joint="SG_J_6" gear="150"/>
	</actuator> 
</mujoco>